<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mi Reina üíó</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0f2e;
      --glass: rgba(255,255,255,0.10);
      --glass2: rgba(255,255,255,0.14);
      --line: rgba(255,255,255,0.16);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.75);
      --accent:#ff4d8d;
      --accent2:#ffd1df;
      --shadow: 0 26px 80px rgba(0,0,0,0.55);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(900px 650px at 20% 10%, rgba(255,77,141,0.22), transparent 60%),
        radial-gradient(900px 700px at 80% 25%, rgba(255,209,223,0.14), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* ===== Cute anime/chibi vibe (original SVG stickers + animated sparkles) ===== */
    .bg{
      position:fixed; inset:0; z-index:-2; pointer-events:none; overflow:hidden;
      opacity:0.95;
    }
    .bg::before{
      content:"";
      position:absolute; inset:-20px;
      background:
        linear-gradient(180deg, rgba(0,0,0,0.72), rgba(0,0,0,0.62)),
        radial-gradient(1000px 700px at 30% 10%, rgba(255,77,141,0.20), transparent 62%),
        radial-gradient(900px 650px at 70% 90%, rgba(255,209,223,0.12), transparent 62%);
      z-index:3;
    }

    .tiles{position:absolute; inset:0; padding:18px; display:grid; grid-template-columns:repeat(12,1fr); grid-template-rows:repeat(10,1fr); gap:10px; z-index:1;}
    .tile{border-radius:18px; border:1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04); overflow:hidden; position:relative;}
    .tile svg{width:100%; height:100%; display:block; opacity:0.92;}
    .tile::after{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(120px 120px at 25% 20%, rgba(255,77,141,0.22), transparent 60%),
        radial-gradient(140px 140px at 75% 70%, rgba(255,209,223,0.14), transparent 60%);
      opacity:0.65;
    }

    .sparkles{position:absolute; inset:0; z-index:2; opacity:0.6; filter: blur(0.2px);} 
    .sparkle{position:absolute; font-size:14px; animation: twinkle 2.6s ease-in-out infinite;}
    @keyframes twinkle{0%,100%{transform:scale(0.9); opacity:0.25}50%{transform:scale(1.25); opacity:0.9}}

    .wrap{max-width:1050px; margin:0 auto; padding:22px 16px 70px; min-height:100vh; display:flex; flex-direction:column; gap:14px;}
    header{display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;}
    .brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:0.2px;}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:7px 11px; border-radius:999px; background: rgba(255,255,255,0.10); border:1px solid rgba(255,255,255,0.14); color: rgba(255,255,255,0.78); font-size:12px; user-select:none;}

    .stage{
      border-radius: calc(var(--radius) + 10px);
      border:1px solid rgba(255,255,255,0.14);
      background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .stage-inner{padding:22px;}
    @media (max-width:700px){.stage-inner{padding:18px;}}

    .screen{display:none; animation: fadeIn 260ms ease forwards;}
    .screen.active{display:block}
    @keyframes fadeIn{from{opacity:0; transform: translateY(6px)}to{opacity:1; transform: translateY(0)}}

    .card{border-radius: var(--radius); background: var(--glass); border:1px solid rgba(255,255,255,0.14); padding:16px;}
    .grid{display:grid; grid-template-columns:1.1fr 0.9fr; gap:14px; align-items:stretch;}
    @media (max-width:880px){.grid{grid-template-columns:1fr}}

    h1{margin:0 0 10px; font-size:clamp(22px, 3.6vw, 36px); line-height:1.15}
    .lead{margin:0; color:var(--muted); font-size:clamp(14px, 1.8vw, 16px); line-height:1.55}
    .tiny{font-size:12px; color: rgba(255,255,255,0.65)}
    .divider{height:1px; background:rgba(255,255,255,0.12); margin:12px 0}

    .cta{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    button{
      border:none; border-radius:16px; padding:12px 14px; font-weight:900;
      cursor:pointer; transition: transform .08s ease, filter .12s ease;
      user-select:none;
    }
    button:active{transform:scale(0.985)}
    .btn-primary{background: linear-gradient(135deg, var(--accent), #ff2f76); color:white; box-shadow: 0 14px 28px rgba(255,77,141,0.25);} 
    .btn-primary:hover{filter:brightness(1.08)}
    .btn-ghost{background: rgba(255,255,255,0.10); border:1px solid rgba(255,255,255,0.16); color: rgba(255,255,255,0.90);} 
    .btn-ghost:hover{filter:brightness(1.10)}

    /* Floating hearts */
    .hearts{position:absolute; inset:0; pointer-events:none; overflow:hidden}
    .heart{position:absolute; bottom:-40px; opacity:0; animation: floatUp linear forwards; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.35));}
    @keyframes floatUp{0%{transform: translateY(0) translateX(0) scale(0.8); opacity:0}10%{opacity:0.9}100%{transform: translateY(-120vh) translateX(var(--drift)) scale(1.35); opacity:0}}

    /* ===== Envelope + paginated letter ===== */
    .letter-grid{display:grid; grid-template-columns: 0.95fr 1.05fr; gap:14px; align-items:start;}
    @media (max-width:900px){.letter-grid{grid-template-columns:1fr}}

    .envelope-stage{position:relative; height:360px; border-radius: var(--radius); background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.14); overflow:hidden;}

    .sticker{
      position:absolute; width:86px; height:86px; border-radius:22px;
      background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12);
      display:flex; align-items:center; justify-content:center;
      backdrop-filter: blur(6px);
    }
    .st1{left:14px; top:14px}
    .st2{right:14px; top:14px}
    .st3{left:14px; bottom:14px}
    .st4{right:14px; bottom:14px}

    .env-shadow{position:absolute; left:50%; bottom:16px; transform: translateX(-50%); width:min(440px, 92%); height:26px; background: rgba(0,0,0,0.35); filter: blur(18px); border-radius:999px; opacity:0.65;}

    .env{position:absolute; left:50%; top:56%; transform: translate(-50%, -50%); width:min(440px, 92%); height:250px; cursor:pointer; user-select:none;}
    .env-body{position:absolute; inset:0; border-radius:18px; background: linear-gradient(180deg, rgba(255,255,255,0.94), rgba(255,255,255,0.84)); border:1px solid rgba(255,255,255,0.70); overflow:hidden;}
    .env-hearts{position:absolute; inset:0; opacity:0.38;
      background:
        radial-gradient(8px 8px at 18% 30%, rgba(255,77,141,0.85), transparent 60%),
        radial-gradient(7px 7px at 30% 58%, rgba(255,77,141,0.75), transparent 60%),
        radial-gradient(8px 8px at 55% 34%, rgba(255,77,141,0.80), transparent 60%),
        radial-gradient(7px 7px at 72% 64%, rgba(255,77,141,0.72), transparent 60%),
        radial-gradient(8px 8px at 82% 40%, rgba(255,77,141,0.82), transparent 60%);
    }

    .env-flap{position:absolute; left:0; right:0; top:0; height:58%; transform-origin: top center; transition: transform 650ms cubic-bezier(.2,.9,.2,1);
      background: linear-gradient(180deg, rgba(255,77,141,0.16), rgba(255,255,255,0.0));
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      border-top-left-radius:18px; border-top-right-radius:18px;
      border:1px solid rgba(255,255,255,0.70);
      border-bottom:none;
    }

    .env-band{position:absolute; left:0; right:0; bottom:0; height:58px; background: rgba(255,77,141,0.10); border-top:1px solid rgba(255,77,141,0.25);
      display:flex; align-items:center; justify-content:space-between; padding:0 12px; gap:10px;
    }
    .chibi-dot{width:38px; height:38px; border-radius:14px; border:1px solid rgba(255,77,141,0.25); background: rgba(255,255,255,0.65);
      display:flex; align-items:center; justify-content:center; font-size:16px;
    }

    .paper{
      position:absolute; left:50%; top:14px; transform: translateX(-50%);
      width:86%; height:220px; border-radius:16px;
      background: rgba(255,255,255,0.94); border:1px solid rgba(255,255,255,0.78);
      box-shadow: 0 18px 38px rgba(0,0,0,0.28);
      transition: transform 850ms cubic-bezier(.2,.9,.2,1), opacity 300ms ease;
      opacity:0; pointer-events:none; overflow:hidden;
    }
    .paper::before{content:""; position:absolute; inset:0; pointer-events:none;
      background: repeating-linear-gradient(180deg, rgba(255,77,141,0.05) 0px, rgba(255,77,141,0.05) 1px, transparent 1px, transparent 22px);
      opacity:0.55;
    }
    .paper-inner{position:absolute; inset:14px; overflow:auto; color: rgba(20,20,26,0.92); font-size:15px; line-height:1.55;}

    .paper-nav{
      position:absolute; left:12px; right:12px; bottom:10px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding-top:8px;
      border-top: 1px solid rgba(0,0,0,0.08);
      background: linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,0.92) 35%);
    }
    .paper-nav .mini{
      border:none; border-radius: 12px; padding:8px 10px;
      font-weight:900; cursor:pointer;
      background: rgba(255,77,141,0.12);
      color: rgba(20,20,26,0.88);
    }
    .paper-nav .mini:active{transform:scale(0.98)}
    .paper-nav .count{font-size:12px; color: rgba(20,20,26,0.65); font-weight:800}

    .env.open .env-flap{transform: rotateX(165deg)}
    .env.open .paper{opacity:1; transform: translateX(-50%) translateY(150px)}

    .panel{border-radius: var(--radius); background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.14); padding:16px; min-height:360px;}
    .panel .title{font-weight:900; margin:0 0 10px; font-size:18px}
    .panel .body{color: rgba(255,255,255,0.78); line-height:1.6; font-size:14.5px}

    /* Question screen buttons */
    .center{
      display:flex; flex-direction:column; gap:14px; align-items:center; text-align:center;
      padding: 14px;
    }

    .choice-row{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}
    .btn-yes{background: linear-gradient(135deg, #35d07f, #1fc56f); color:white; box-shadow: 0 14px 28px rgba(53,208,127,0.18);} 
    .btn-yes:hover{filter:brightness(1.06)}

    .btn-no{
      background: rgba(255,107,107,0.16);
      border:1px solid rgba(255,107,107,0.32);
      color: rgba(255,255,255,0.92);
      position:relative;
    }

    /* Option cards */
    .opt-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
    @media (max-width:820px){.opt-grid{grid-template-columns:1fr}}

    .opt{
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.08);
      padding:14px;
      text-align:left;
      cursor:pointer;
      transition: transform .10s ease, filter .12s ease;
    }
    .opt:hover{filter:brightness(1.06)}
    .opt:active{transform:scale(0.99)}
    .opt b{display:block; margin-bottom:6px}
    .opt span{color: rgba(255,255,255,0.75); line-height:1.5}

    .footer{text-align:center; color: rgba(255,255,255,0.55); font-size:12px; margin-top:4px;}

    @media (prefers-reduced-motion: reduce){
      .heart{display:none}
      .env-flap,.paper{transition:none}
      .sparkle{animation:none}
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true">
    <div class="tiles" id="tiles"></div>
    <div class="sparkles" id="sparkles"></div>
  </div>

  <div class="wrap">
    <header>
      <div class="brand">
        <span style="font-size:18px">üíå</span>
        <span id="siteTitle">Mi Reina üíó</span>
        <span class="badge" id="fromBadge">from: You</span>
      </div>
      <div class="badge" id="todayBadge">TEST</div>
    </header>

    <main class="stage">
      <div class="hearts" id="hearts"></div>
      <div class="stage-inner">

        <!-- SCREEN 1: Intro -->
        <section class="screen active" id="screenIntro">
          <div class="grid">
            <div class="card">
              <h1 id="introText">IF you are here right now, you're the love of my life and i want to spend rest of my life with you till we become old and rusted. SO let's get started.</h1>
              <p class="lead">Tap the button. The next part is for you.</p>
              <div class="cta">
                <button class="btn-primary" id="btnStart">Let‚Äôs get started üíñ</button>
              </div>
              <div class="divider"></div>
              <p class="tiny">If this feels too animated, enable ‚ÄúReduce motion‚Äù on your phone/PC.</p>
            </div>
            <div class="card">
              <h2 style="margin:0 0 10px">What‚Äôs inside</h2>
              <p class="lead" style="margin:0">You‚Äôll open an envelope. Then‚Ä¶ a very important question.</p>
              <div class="divider"></div>
              <p class="tiny">Your letter text goes inside the envelope pages. (You‚Äôll paste it later.)</p>
            </div>
          </div>
        </section>

        <!-- SCREEN 2: Envelope + Letter Pages -->
        <section class="screen" id="screenLetter">
          <div class="letter-grid">
            <div>
              <div class="card">
                <h2 style="margin:0 0 8px">Your letter üíå</h2>
                <p class="tiny" style="margin:0">Click the envelope to open it. Use Next/Prev to turn pages.</p>
              </div>

              <div style="height:12px"></div>

              <div class="envelope-stage">
                <div class="sticker st1">üê∞</div>
                <div class="sticker st2">üå∏</div>
                <div class="sticker st3">üß∏</div>
                <div class="sticker st4">üíû</div>

                <div class="env-shadow"></div>

                <div class="env" id="envelope" role="button" tabindex="0" aria-label="Open the envelope">
                  <div class="env-body">
                    <div class="env-hearts"></div>
                    <div class="env-flap"></div>

                    <div class="paper" id="paper">
                      <div class="paper-inner" id="paperInner"></div>
                      <div class="paper-nav">
                        <button class="mini" id="btnPrev">‚Üê Prev</button>
                        <div class="count" id="pageCount">Page 1 / 1</div>
                        <button class="mini" id="btnNext">Next ‚Üí</button>
                      </div>
                    </div>

                    <div class="env-band">
                      <div class="chibi-dot">üê£</div>
                      <div class="tiny" style="color: rgba(20,20,26,0.70)">Open me ‚Üí</div>
                      <div class="chibi-dot">üß∏</div>
                    </div>
                  </div>
                </div>
              </div>

              <div style="height:12px"></div>
              <div class="card">
                <div class="cta" style="margin-top:0; justify-content:space-between">
                  <button class="btn-ghost" id="btnBackIntro">‚Üê Back</button>
                  <button class="btn-primary" id="btnAfterLetter">Next üíó</button>
                </div>
                <p class="tiny" style="margin:10px 0 0">(Tip: click the envelope first, then read. Hit Next when done.)</p>
              </div>
            </div>

            <div class="panel">
              <div class="title">Letter instructions</div>
              <div class="body">
                This letter supports page turning.
                <div class="divider"></div>
                When you send me the real letter, I will replace the placeholder pages with your text.
                <div class="divider"></div>
                For now, this is just to test the flow.
              </div>
            </div>
          </div>
        </section>

        <!-- SCREEN 3: Important question -->
        <section class="screen" id="screenQuestion">
          <div class="card center">
            <h1 style="margin-bottom:0">Now a really important question for you Mi Reina üíó</h1>
            <p class="lead" style="max-width:780px">Will you be my Valentine‚Äôs?</p>
            <div class="choice-row" style="margin-top:6px">
              <button class="btn-yes" id="btnYes">Yes üíñ</button>
              <button class="btn-no" id="btnNo">No üôÉ</button>
            </div>
            <p class="tiny">(The ‚ÄúNo‚Äù button is intentionally impossible. Don‚Äôt fight it.)</p>
          </div>
        </section>

        <!-- SCREEN 4: Set for a date -->
        <section class="screen" id="screenSetup">
          <div class="card center">
            <h1 style="margin-bottom:0">Let‚Äôs get it all set for a date üíó</h1>
            <p class="lead" style="max-width:780px">One more step.</p>
            <div class="cta" style="justify-content:center">
              <button class="btn-primary" id="btnToChoices">Next ‚Üí</button>
            </div>
          </div>
        </section>

        <!-- SCREEN 5: Choose a date -->
        <section class="screen" id="screenChoices">
          <div class="card">
            <h1 style="margin-bottom:8px">Choose a date</h1>
            <p class="lead">Pick one option below.</p>
            <div class="divider"></div>
            <div class="opt-grid">
              <div class="opt" id="opt1" role="button" tabindex="0">
                <b>Cooking together</b>
                <span>I'll cook whatever you want me to cook + movie night + virtual gifts from me + wine</span>
              </div>
              <div class="opt" id="opt2" role="button" tabindex="0">
                <b>Going out</b>
                <span>Going out somewhere to eat in a restaurant + movie night + wine + virtual gifts from me</span>
              </div>
            </div>
          </div>
        </section>

        <!-- SCREEN 6: Thank you -->
        <section class="screen" id="screenThanks">
          <div class="card center">
            <h1 style="margin-bottom:0">Thank you for being my Valentine üíñ</h1>
            <p class="lead" id="chosenText" style="max-width:820px"></p>
            <div class="divider" style="width: min(720px, 100%)"></div>
            <p class="tiny">Now send me what time you want ‚Äî I‚Äôll handle the rest.</p>
          </div>
        </section>

        <div class="footer">Made with üíó and intent.</div>
      </div>
    </main>
  </div>

  <script>
  // If something breaks, show it on the page (so you don't need DevTools)
  (function(){
    function setTopRight(msg){
      var el = document.getElementById('todayBadge');
      if(el) el.textContent = msg;
    }
    window.addEventListener('error', function(e){
      setTopRight('JS error: ' + (e && e.message ? e.message : 'unknown'));
    });
    window.addEventListener('unhandledrejection', function(e){
      setTopRight('JS error: promise');
    });

    function onReady(fn){
      if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fn);
      else fn();
    }

    onReady(function(){
      // ===== ONLY EDIT THESE LATER (when you send your letter) =====
      var CONFIG = {
        siteTitle: "Mi Reina üíó",
        fromBadge: "from: Your Name",
        introText: "IF you are here right now, you're the love of my life and i want to spend rest of my life with you till we become old and rusted. SO let's get started.",

        // Letter pages (placeholder). Replace later.
        letterPages: [
          "<b>Page 1:</b><br><br>This is a placeholder letter page so you can test the page-turning.

(You will paste your real letter later.)",
          "<b>Page 2:</b><br><br>Another placeholder page.

When you send your big letter, I‚Äôll split it into pages here.",
          "<b>Page 3:</b><br><br>Last placeholder.

After you finish reading, press the Next button outside the envelope.",
        ]
      };

      // ===== Helpers =====
      function $(id){ return document.getElementById(id); }
      function safeGet(id){
        var el = $(id);
        if(!el) throw new Error('Missing element #' + id);
        return el;
      }
      function show(id){
        var ids = ["screenIntro","screenLetter","screenQuestion","screenSetup","screenChoices","screenThanks"];
        for(var i=0;i<ids.length;i++){
          var el = $(ids[i]);
          if(el) el.classList.remove('active');
        }
        safeGet(id).classList.add('active');
        window.scrollTo({top:0, behavior:"smooth"});
      }

      // Header + intro
      safeGet("siteTitle").textContent = CONFIG.siteTitle;
      safeGet("fromBadge").textContent = CONFIG.fromBadge;
      safeGet("introText").textContent = CONFIG.introText;

      var today = new Date();
      safeGet("todayBadge").textContent = "Today: " + today.toLocaleDateString(undefined, { weekday:"short", year:"numeric", month:"short", day:"numeric" });

      // ===== Cute background tiles: original SVG chibi couple (not from any anime) =====
      function coupleSvg(seed){
        var hair1 = (seed % 2 === 0) ? "#2a2a2e" : "#3a2b2b";
        var hair2 = (seed % 3 === 0) ? "#2b3a4a" : "#2b2b3a";
        var blush = "rgba(255,77,141,0.55)";
        return (
          '<svg viewBox="0 0 400 500" xmlns="http://www.w3.org/2000/svg">' +
            '<defs>' +
              '<linearGradient id="g' + seed + '" x1="0" x2="1" y1="0" y2="1">' +
                '<stop offset="0" stop-color="rgba(255,77,141,0.25)"/>' +
                '<stop offset="1" stop-color="rgba(255,209,223,0.12)"/>' +
              '</linearGradient>' +
            '</defs>' +
            '<rect width="400" height="500" fill="url(#g' + seed + ')"/>' +
            '<g transform="translate(40,40)">' +
              '<g opacity="0.65">' +
                '<path d="M290 50c-10-18-33-18-43-2-10-16-33-16-43 2-11 20 8 38 43 64 35-26 54-44 43-64z" fill="rgba(255,77,141,0.55)"/>' +
                '<path d="M90 90c-7-12-22-12-29-1-7-11-22-11-29 1-8 13 5 26 29 43 24-17 37-30 29-43z" fill="rgba(255,209,223,0.55)"/>' +
              '</g>' +
              '<g transform="translate(70,170)">' +
                '<circle cx="70" cy="70" r="70" fill="rgba(255,255,255,0.82)"/>' +
                '<path d="M5 70c20-55 65-80 130-55 5 40-10 70-25 90-25-20-60-20-80 0-16-18-26-40-25-35z" fill="' + hair1 + '" opacity="0.9"/>' +
                '<circle cx="45" cy="78" r="8" fill="#111"/>' +
                '<circle cx="95" cy="78" r="8" fill="#111"/>' +
                '<circle cx="45" cy="78" r="3" fill="#fff"/>' +
                '<circle cx="95" cy="78" r="3" fill="#fff"/>' +
                '<path d="M65 100c10 10 20 10 30 0" stroke="#111" stroke-width="6" stroke-linecap="round" fill="none"/>' +
                '<circle cx="30" cy="102" r="10" fill="' + blush + '"/>' +
                '<circle cx="110" cy="102" r="10" fill="' + blush + '"/>' +
                '<path d="M20 145c30 25 110 25 140 0" fill="rgba(255,77,141,0.14)"/>' +
              '</g>' +
              '<g transform="translate(190,170)">' +
                '<circle cx="70" cy="70" r="70" fill="rgba(255,255,255,0.82)"/>' +
                '<path d="M10 60c18-50 68-70 130-40-5 50-30 75-45 92-18-18-55-22-80 0-12-12-22-25-25-52z" fill="' + hair2 + '" opacity="0.9"/>' +
                '<circle cx="45" cy="78" r="8" fill="#111"/>' +
                '<circle cx="95" cy="78" r="8" fill="#111"/>' +
                '<circle cx="45" cy="78" r="3" fill="#fff"/>' +
                '<circle cx="95" cy="78" r="3" fill="#fff"/>' +
                '<path d="M62 102c12 8 24 8 36 0" stroke="#111" stroke-width="6" stroke-linecap="round" fill="none"/>' +
                '<circle cx="30" cy="102" r="10" fill="' + blush + '"/>' +
                '<circle cx="110" cy="102" r="10" fill="' + blush + '"/>' +
                '<path d="M18 145c35 28 110 28 145 0" fill="rgba(255,209,223,0.16)"/>' +
              '</g>' +
              '<text x="140" y="410" font-size="22" fill="rgba(255,255,255,0.85)" font-weight="800">cute moments</text>' +
            '</g>' +
          '</svg>'
        );
      }

      function makeTile(seed){
        var t = document.createElement('div');
        t.className = 'tile';
        var colStart = (seed % 10) + 1;
        var rowStart = (seed % 7) + 1;
        var colSpan = (seed % 3) + 3;
        var rowSpan = (seed % 2) + 3;
        t.style.gridColumn = colStart + ' / span ' + colSpan;
        t.style.gridRow = rowStart + ' / span ' + rowSpan;
        t.innerHTML = coupleSvg(seed);
        return t;
      }

      var tiles = safeGet('tiles');
      for(var i=0;i<10;i++) tiles.appendChild(makeTile(i+1));

      // Sparkles
      var sparkles = safeGet('sparkles');
      var sparkleChars = ["‚ú®","‚ú¶","‚úß","‚ãÜ","üí´"]; 
      for(var j=0;j<18;j++){
        var s = document.createElement('div');
        s.className = 'sparkle';
        s.textContent = sparkleChars[Math.floor(Math.random()*sparkleChars.length)];
        s.style.left = (Math.random()*100).toFixed(2) + '%';
        s.style.top = (Math.random()*100).toFixed(2) + '%';
        s.style.animationDelay = (Math.random()*2.4).toFixed(2) + 's';
        s.style.fontSize = (12 + Math.random()*10).toFixed(0) + 'px';
        sparkles.appendChild(s);
      }

      // Floating hearts
      var hearts = safeGet('hearts');
      var heartChars = ["üíó","üíñ","üíò","üíï","üíû","üíì","üíù"]; 
      function spawnHeart(){
        var el = document.createElement('div');
        el.className = 'heart';
        el.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
        var left = Math.random()*100;
        var dur = 5 + Math.random()*4.5;
        var drift = (Math.random()*120 - 60).toFixed(0) + 'px';
        var size = (14 + Math.random()*18).toFixed(0);
        el.style.left = left + '%';
        el.style.setProperty('--drift', drift);
        el.style.animationDuration = dur + 's';
        el.style.fontSize = size + 'px';
        hearts.appendChild(el);
        setTimeout(function(){ el.remove(); }, (dur+0.2)*1000);
      }
      setInterval(spawnHeart, 520);

      // Letter pagination
      var pages = CONFIG.letterPages && CONFIG.letterPages.length ? CONFIG.letterPages : ["(no pages)"];
      var pageIndex = 0;

      function renderPage(){
        var inner = safeGet('paperInner');
        var safe = String(pages[pageIndex] || '');
        inner.innerHTML = safe.replace(/
/g, '<br>');
        safeGet('pageCount').textContent = 'Page ' + (pageIndex+1) + ' / ' + pages.length;

        var prev = safeGet('btnPrev');
        var next = safeGet('btnNext');
        prev.disabled = (pageIndex === 0);
        next.disabled = (pageIndex === pages.length - 1);
        prev.style.opacity = prev.disabled ? 0.55 : 1;
        next.style.opacity = next.disabled ? 0.55 : 1;
      }
      renderPage();

      safeGet('btnPrev').addEventListener('click', function(e){ e.stopPropagation(); if(pageIndex>0){ pageIndex--; renderPage(); }});
      safeGet('btnNext').addEventListener('click', function(e){ e.stopPropagation(); if(pageIndex<pages.length-1){ pageIndex++; renderPage(); }});

      // Envelope open
      var env = safeGet('envelope');
      var opened = false;
      function toggleEnvelope(){
        opened = !opened;
        env.classList.toggle('open', opened);
        if(opened){
          for(var k=0;k<16;k++) (function(kk){ setTimeout(spawnHeart, kk*45); })(k);
        }
      }
      env.addEventListener('click', toggleEnvelope);
      env.addEventListener('keydown', function(e){ if(e.key==='Enter' || e.key===' '){ toggleEnvelope(); }});

      // Navigation flow
      safeGet('btnStart').addEventListener('click', function(){ show('screenLetter'); });
      safeGet('btnBackIntro').addEventListener('click', function(){ show('screenIntro'); });
      safeGet('btnAfterLetter').addEventListener('click', function(){ show('screenQuestion'); });

      // No button dodge
      var noBtn = safeGet('btnNo');
      function dodgeNo(){
        var pad = 12;
        var w = 140;
        var h = 52;
        var maxX = Math.max(pad, window.innerWidth - w - pad);
        var maxY = Math.max(pad, window.innerHeight - h - pad);
        var x = pad + Math.random()*(maxX - pad);
        var y = pad + Math.random()*(maxY - pad);
        noBtn.style.position = 'fixed';
        noBtn.style.left = x + 'px';
        noBtn.style.top = y + 'px';
        noBtn.style.zIndex = 9999;
      }
      noBtn.addEventListener('mouseenter', dodgeNo);
      noBtn.addEventListener('mousemove', dodgeNo);
      noBtn.addEventListener('touchstart', function(e){ e.preventDefault(); dodgeNo(); }, {passive:false});

      // Yes flow
      safeGet('btnYes').addEventListener('click', function(){
        for(var z=0;z<22;z++) (function(zz){ setTimeout(spawnHeart, zz*40); })(z);
        show('screenSetup');
      });

      safeGet('btnToChoices').addEventListener('click', function(){ show('screenChoices'); });

      function choose(text){
        safeGet('chosenText').textContent = text;
        for(var q=0;q<20;q++) (function(qq){ setTimeout(spawnHeart, qq*45); })(q);
        show('screenThanks');
      }

      function clickOrEnter(el, fn){
        el.addEventListener('click', fn);
        el.addEventListener('keydown', function(e){ if(e.key==='Enter') fn(); });
      }

      clickOrEnter(safeGet('opt1'), function(){ choose('You chose: Cooking together + movie night + virtual gifts + wine üíû'); });
      clickOrEnter(safeGet('opt2'), function(){ choose('You chose: Going out to eat + movie night + wine + virtual gifts üíû'); });
    });
  })();
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const badge = document.getElementById("todayBadge");
    if (badge) badge.textContent = "JS OK ‚úÖ";

    const btn = document.getElementById("btnStart");
    if (btn) {
      btn.addEventListener("click", () => {
        alert("Button works ‚úÖ");
      });
    }
  });
</script>
</body>
</html>
